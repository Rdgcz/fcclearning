<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor HTML/CSS/JS Avançado</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --text-color: #ecf0f1;
            --panel-bg: #1a252f;
            --resizer-color: #7f8c8d;
            --button-bg: #2980b9;
            --button-hover: #3498db;
            --success-color: #27ae60;
            --warning-color: #e74c3c;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: var(--primary-color);
            color: var(--text-color);
            overflow: hidden;
        }
        
        header {
            background-color: var(--secondary-color);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .logo i {
            color: var(--accent-color);
        }
        
        .controls {
            display: flex;
            gap: 10px;
        }
        
        button {
            background-color: var(--button-bg);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: var(--button-hover);
        }
        
        button.save {
            background-color: var(--success-color);
        }
        
        button.save:hover {
            background-color: #2ecc71;
        }
        
        button.load {
            background-color: var(--accent-color);
        }
        
        button.load:hover {
            background-color: #5dade2;
        }
        
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .panel-container {
            display: flex;
            flex: 1;
            position: relative;
        }
        
        .panel {
            display: flex;
            flex-direction: column;
            width: 25%;
            min-width: 100px;
            background-color: var(--panel-bg);
            transition: width 0.3s ease;
            overflow: hidden;
        }
        
        .panel.collapsed {
            width: 40px !important;
            min-width: 40px;
        }
        
        .panel.collapsed .panel-content {
            display: none;
        }
        
        .panel-header {
            background: var(--secondary-color);
            color: white;
            padding: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            cursor: pointer;
        }
        
        .panel-header h3 {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        
        .toggle-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 2px 5px;
            font-size: 0.9rem;
        }
        
        .panel-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        textarea.code-editor {
            flex: 1;
            padding: 15px;
            border: none;
            resize: none;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            background-color: #263238;
            color: #e0e0e0;
            outline: none;
            tab-size: 4;
            -moz-tab-size: 4;
            line-height: 1.5;
        }
        
        textarea#htmlCode {
            color: #ff8a65;
        }
        
        textarea#cssCode {
            color: #82aaff;
        }
        
        textarea#jsCode {
            color: #c792ea;
        }
        
        .resizer {
            width: 5px;
            cursor: col-resize;
            background: var(--resizer-color);
            transition: background-color 0.2s;
        }
        
        .resizer:hover {
            background: var(--accent-color);
        }
        
        #previewPanel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
        }
        
        #preview {
            flex: 1;
            border: none;
            background: white;
        }
        
        .panel-icon {
            font-size: 16px;
            width: 20px;
            text-align: center;
        }
        
        .collapsed .panel-header {
            writing-mode: vertical-lr;
            text-orientation: mixed;
            justify-content: center;
            padding: 15px 8px;
        }
        
        .collapsed .panel-header h3 {
            flex-direction: column;
            gap: 5px;
        }
        
        .collapsed .toggle-btn {
            transform: rotate(90deg);
            margin-top: 10px;
        }
        
        /* Ajustes para modo responsivo */
        @media (max-width: 900px) {
            .panel {
                width: 30%;
            }
        }
        
        @media (max-width: 700px) {
            .panel {
                width: 35%;
            }
        }
        
        /* Estilo para as barras de rolagem */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1a252f;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #34495e;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #2c3e50;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <i class="fas fa-code"></i>
            <span>Editor HTML/CSS/JS</span>
        </div>
        <div class="controls">
            <button class="save" id="saveBtn">
                <i class="fas fa-save"></i> Salvar
            </button>
            <button class="load" id="loadBtn">
                <i class="fas fa-folder-open"></i> Abrir
            </button>
        </div>
    </header>

    <div class="main-container">
        <div class="panel-container">
            <!-- Painel HTML -->
            <div class="panel" id="htmlPanel">
                <div class="panel-header">
                    <h3><i class="fab fa-html5 panel-icon"></i> HTML</h3>
                    <button class="toggle-btn" data-panel="htmlPanel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <textarea id="htmlCode" class="code-editor" placeholder="Digite seu código HTML aqui...">&lt;!DOCTYPE html&gt;
&lt;html lang="pt-BR"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Meu Projeto&lt;/title&gt;
    &lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"&gt;
    &lt;style&gt;
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: #6c5ce7;
            text-align: center;
            margin-bottom: 20px;
        }
        .btn {
            background: #6c5ce7;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #5241c0;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;h1&gt;&lt;i class="fas fa-rocket"&gt;&lt;/i&gt; Bem-vindo ao Meu Projeto&lt;/h1&gt;
        &lt;p&gt;Este é um exemplo de página HTML. Edite este código para criar sua própria página.&lt;/p&gt;
        &lt;button class="btn" onclick="alert('Olá!')"&gt;Clique Aqui&lt;/button&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea>
                </div>
            </div>
            <div class="resizer" data-panel="htmlPanel"></div>

            <!-- Painel CSS -->
            <div class="panel" id="cssPanel">
                <div class="panel-header">
                    <h3><i class="fab fa-css3-alt panel-icon"></i> CSS</h3>
                    <button class="toggle-btn" data-panel="cssPanel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <textarea id="cssCode" class="code-editor" placeholder="Digite seu código CSS aqui...">/* Estilos personalizados para o projeto */
.container {
    animation: fadeIn 0.8s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.btn {
    display: inline-block;
    margin-top: 15px;
    position: relative;
    overflow: hidden;
}

.btn:after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%);
    transform-origin: 50% 50%;
}

@keyframes ripple {
    0% {
        transform: scale(0, 0);
        opacity: 0.5;
    }
    100% {
        transform: scale(20, 20);
        opacity: 0;
    }
}

.btn:focus:not(:active)::after {
    animation: ripple 1s ease-out;
}</textarea>
                </div>
            </div>
            <div class="resizer" data-panel="cssPanel"></div>

            <!-- Painel JavaScript -->
            <div class="panel" id="jsPanel">
                <div class="panel-header">
                    <h3><i class="fab fa-js-square panel-icon"></i> JavaScript</h3>
                    <button class="toggle-btn" data-panel="jsPanel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <textarea id="jsCode" class="code-editor" placeholder="Digite seu código JavaScript aqui...">// JavaScript do projeto
document.addEventListener('DOMContentLoaded', function() {
    console.log('Página carregada!');
    
    // Adiciona efeito de ripple nos botões
    const buttons = document.querySelectorAll('.btn');
    buttons.forEach(btn => {
        btn.addEventListener('click', function(e) {
            const x = e.clientX - e.target.getBoundingClientRect().left;
            const y = e.clientY - e.target.getBoundingClientRect().top;
            
            const circle = document.createElement('span');
            circle.classList.add('ripple');
            circle.style.left = x + 'px';
            circle.style.top = y + 'px';
            
            this.appendChild(circle);
            
            setTimeout(() => {
                circle.remove();
            }, 500);
        });
    });
});</textarea>
                </div>
            </div>
            <div class="resizer" data-panel="jsPanel"></div>

            <!-- Painel de Preview -->
            <div class="panel" id="previewPanel">
                <div class="panel-header">
                    <h3><i class="fas fa-eye panel-icon"></i> Preview</h3>
                    <button class="toggle-btn" data-panel="previewPanel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <iframe id="preview"></iframe>
                </div>
            </div>
        </div>
    </div>

    <input type="file" id="fileInput" style="display: none;" accept=".json">

    <script>
        // Elementos do DOM
        const htmlCode = document.getElementById('htmlCode');
        const cssCode = document.getElementById('cssCode');
        const jsCode = document.getElementById('jsCode');
        const preview = document.getElementById('preview');
        const saveBtn = document.getElementById('saveBtn');
        const loadBtn = document.getElementById('loadBtn');
        const fileInput = document.getElementById('fileInput');
        const toggleButtons = document.querySelectorAll('.toggle-btn');
        const resizers = document.querySelectorAll('.resizer');
        
        // Estado das janelas
        const panelState = {
            htmlPanel: true,
            cssPanel: true,
            jsPanel: true,
            previewPanel: true
        };
        
        // Inicializar o preview
        updatePreview();
        
        // Adicionar event listeners para atualizar o preview
        [htmlCode, cssCode, jsCode].forEach(editor => {
            editor.addEventListener('input', updatePreview);
        });
        
        // Função para atualizar o preview
        function updatePreview() {
            const html = htmlCode.value;
            const css = cssCode.value;
            const js = jsCode.value;
            
            const previewDocument = preview.contentDocument || preview.contentWindow.document;
            
            const fullContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <style>${css}</style>
                </head>
                <body>
                    ${html}
                    <script>${js}<\/script>
                </body>
                </html>
            `;
            
            previewDocument.open();
            previewDocument.write(fullContent);
            previewDocument.close();
        }
        
        // Função para recolher/expandir painéis
        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            const toggleBtn = panel.querySelector('.toggle-btn i');
            
            panelState[panelId] = !panelState[panelId];
            panel.classList.toggle('collapsed');
            
            if (panelState[panelId]) {
                toggleBtn.className = 'fas fa-chevron-left';
            } else {
                toggleBtn.className = 'fas fa-chevron-right';
            }
            
            // Ajustar o layout após recolher/expandir
            setTimeout(updatePreview, 300);
        }
        
        // Adicionar event listeners para os botões de recolher/expandir
        toggleButtons.forEach(btn => {
            btn.addEventListener('click', (e) => {
                const panelId = e.currentTarget.getAttribute('data-panel');
                togglePanel(panelId);
            });
        });
        
        // Função de redimensionamento
        let currentPanel, startX, startWidth;
        
        resizers.forEach(resizer => {
            resizer.addEventListener('mousedown', (e) => {
                e.preventDefault();
                currentPanel = resizer.previousElementSibling;
                startX = e.clientX;
                startWidth = parseInt(getComputedStyle(currentPanel).width, 10);
                
                document.addEventListener('mousemove', resizePanel);
                document.addEventListener('mouseup', stopResize);
            });
        });
        
        function resizePanel(e) {
            if (currentPanel) {
                const dx = e.clientX - startX;
                currentPanel.style.width = `${startWidth + dx}px`;
            }
        }
        
        function stopResize() {
            document.removeEventListener('mousemove', resizePanel);
            document.removeEventListener('mouseup', stopResize);
        }
        
        // Funções para salvar e carregar
        saveBtn.addEventListener('click', saveProject);
        loadBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', loadProject);
        
        function saveProject() {
            const project = {
                html: htmlCode.value,
                css: cssCode.value,
                js: jsCode.value,
                panels: panelState
            };
            
            const dataStr = JSON.stringify(project);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'projeto.html-editor.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            // Feedback visual
            saveBtn.innerHTML = '<i class="fas fa-check"></i> Salvo!';
            setTimeout(() => {
                saveBtn.innerHTML = '<i class="fas fa-save"></i> Salvar';
            }, 2000);
        }
        
        function loadProject(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const project = JSON.parse(e.target.result);
                    
                    htmlCode.value = project.html || '';
                    cssCode.value = project.css || '';
                    jsCode.value = project.js || '';
                    
                    // Restaurar estado dos painéis
                    if (project.panels) {
                        Object.keys(project.panels).forEach(panelId => {
                            panelState[panelId] = project.panels[panelId];
                            const panel = document.getElementById(panelId);
                            const toggleBtn = panel.querySelector('.toggle-btn i');
                            
                            if (panelState[panelId]) {
                                panel.classList.remove('collapsed');
                                toggleBtn.className = 'fas fa-chevron-left';
                            } else {
                                panel.classList.add('collapsed');
                                toggleBtn.className = 'fas fa-chevron-right';
                            }
                        });
                    }
                    
                    updatePreview();
                    
                    // Feedback visual
                    loadBtn.innerHTML = '<i class="fas fa-check"></i> Carregado!';
                    setTimeout(() => {
                        loadBtn.innerHTML = '<i class="fas fa-folder-open"></i> Abrir';
                    }, 2000);
                } catch (error) {
                    alert('Erro ao carregar o arquivo: ' + error.message);
                }
            };
            reader.readAsText(file);
        }
        
        // Ajustar o iframe quando a janana for redimensionada
        window.addEventListener('resize', updatePreview);
    </script>
</body>
</html>