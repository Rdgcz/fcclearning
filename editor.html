<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML+CSS+JS Code Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <!---->
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --text-color: #ecf0f1;
            --panel-bg: #1a252f;
            --resizer-color: #7f8c8d;
            --button-bg: #2980b9;
            --button-hover: #3498db;
            --success-color: #27ae60;
            --warning-color: #e74c3c;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: var(--primary-color);
            color: var(--text-color);
            overflow: hidden;
        }
        
        header {
            background-color: var(--secondary-color);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .logo i {
            color: var(--accent-color);
        }
        
        .controls {
            display: flex;
            gap: 10px;
        }
        
        button {
            background-color: var(--button-bg);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: var(--button-hover);
        }
        
        button.save {
            background-color: var(--success-color);
        }
        
        button.save:hover {
            background-color: #2ecc71;
        }
        
        button.load {
            background-color: var(--accent-color);
        }
        
        button.load:hover {
            background-color: #5dade2;
        }
        
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .panel-container {
            display: flex;
            flex: 1;
            position: relative;
        }
        
        .panel {
            display: flex;
            flex-direction: column;
            width: 25%;
            min-width: 100px;
            background-color: var(--panel-bg);
            transition: width 0.3s ease;
            overflow: hidden;
        }
        
        .panel.collapsed {
            width: 40px !important;
            min-width: 40px;
        }
        
        .panel.collapsed .panel-content {
            display: none;
        }
        
        .panel-header {
            background: var(--secondary-color);
            color: white;
            padding: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            cursor: pointer;
        }
        
        .panel-header h3 {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        
        .toggle-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 2px 5px;
            font-size: 0.9rem;
        }
        
        .panel-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        textarea.code-editor {
            flex: 1;
            padding: 15px;
            border: none;
            resize: none;
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            background-color: #263238;
            color: #e0e0e0;
            outline: none;
            tab-size: 4;
            -moz-tab-size: 4;
            line-height: 1.5;
        }
        
        textarea#htmlCode {
            color: #ff8a65;
        }
        
        textarea#cssCode {
            color: #82aaff;
        }
        
        textarea#jsCode {
            color: #c792ea;
        }
        
        .resizer {
            width: 5px;
            cursor: col-resize;
            background: var(--resizer-color);
            transition: background-color 0.2s;
        }
        
        .resizer:hover {
            background: var(--accent-color);
        }
        
        #previewPanel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
        }
        
        #preview {
            flex: 1;
            border: none;
            background: white;
        }
        
        .panel-icon {
            font-size: 16px;
            width: 20px;
            text-align: center;
        }
        
        .collapsed .panel-header {
            writing-mode: vertical-lr;
            text-orientation: mixed;
            justify-content: center;
            padding: 15px 8px;
        }
        
        .collapsed .panel-header h3 {
            flex-direction: column;
            gap: 5px;
        }
        
        .collapsed .toggle-btn {
            transform: rotate(90deg);
            margin-top: 10px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 900px) {
            .panel {
                width: 30%;
            }
        }
        
        @media (max-width: 700px) {
            .panel {
                width: 35%;
            }
        }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1a252f;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #34495e;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #2c3e50;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <i class="fas fa-code"></i>
            <span>HTML+CSS+JS Code Editor</span>
        </div>
        <div class="controls">
            <button class="save" id="saveBtn">
                <i class="fas fa-save"></i> Save
            </button>
            <button class="load" id="loadBtn">
                <i class="fas fa-folder-open"></i> Load
            </button>
        </div>
    </header>

    <div class="main-container">
        <div class="panel-container">
            <!-- HTML Panel -->
            <div class="panel" id="htmlPanel">
                <div class="panel-header">
                    <h3><i class="fab fa-html5 panel-icon"></i> HTML</h3>
                    <button class="toggle-btn" data-panel="htmlPanel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <textarea id="htmlCode" class="code-editor" placeholder="Enter your HTML code here...">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello World&lt;/h1&gt;
    &lt;p&gt;Start editing to see some magic happen!&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea>
                </div>
            </div>
            <div class="resizer" data-panel="htmlPanel"></div>

            <!-- CSS Panel -->
            <div class="panel" id="cssPanel">
                <div class="panel-header">
                    <h3><i class="fab fa-css3-alt panel-icon"></i> CSS</h3>
                    <button class="toggle-btn" data-panel="cssPanel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <textarea id="cssCode" class="code-editor" placeholder="Enter your CSS code here..."></textarea>
                </div>
            </div>
            <div class="resizer" data-panel="cssPanel"></div>

            <!-- JavaScript Panel -->
            <div class="panel" id="jsPanel">
                <div class="panel-header">
                    <h3><i class="fab fa-js-square panel-icon"></i> JavaScript</h3>
                    <button class="toggle-btn" data-panel="jsPanel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <textarea id="jsCode" class="code-editor" placeholder="Enter your JavaScript code here..."></textarea>
                </div>
            </div>
            <div class="resizer" data-panel="jsPanel"></div>

            <!-- Preview Panel -->
            <div class="panel" id="previewPanel">
                <div class="panel-header">
                    <h3><i class="fas fa-eye panel-icon"></i> Preview</h3>
                    <button class="toggle-btn" data-panel="previewPanel">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                <div class="panel-content">
                    <iframe id="preview"></iframe>
                </div>
            </div>
        </div>
    </div>

    <input type="file" id="fileInput" style="display: none;" accept=".json">

    <script>
        // DOM elements
        const htmlCode = document.getElementById('htmlCode');
        const cssCode = document.getElementById('cssCode');
        const jsCode = document.getElementById('jsCode');
        const preview = document.getElementById('preview');
        const saveBtn = document.getElementById('saveBtn');
        const loadBtn = document.getElementById('loadBtn');
        const fileInput = document.getElementById('fileInput');
        const toggleButtons = document.querySelectorAll('.toggle-btn');
        const resizers = document.querySelectorAll('.resizer');
        
        // Panel state
        const panelState = {
            htmlPanel: true,
            cssPanel: true,
            jsPanel: true,
            previewPanel: true
        };
        
        // Initialize preview
        updatePreview();
        
        // Add event listeners for live preview
        [htmlCode, cssCode, jsCode].forEach(editor => {
            editor.addEventListener('input', updatePreview);
        });
        
        // Update preview function
        function updatePreview() {
            const html = htmlCode.value;
            const css = cssCode.value;
            const js = jsCode.value;
            
            const previewDocument = preview.contentDocument || preview.contentWindow.document;
            
            const fullContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <style>${css}</style>
                </head>
                <body>
                    ${html}
                    <script>${js}<\/script>
                </body>
                </html>
            `;
            
            previewDocument.open();
            previewDocument.write(fullContent);
            previewDocument.close();
        }
        
        // Toggle panel function
        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            const toggleBtn = panel.querySelector('.toggle-btn i');
            
            panelState[panelId] = !panelState[panelId];
            panel.classList.toggle('collapsed');
            
            if (panelState[panelId]) {
                toggleBtn.className = 'fas fa-chevron-left';
            } else {
                toggleBtn.className = 'fas fa-chevron-right';
            }
            
            // Adjust layout after toggle
            setTimeout(updatePreview, 300);
        }
        
        // Add event listeners for toggle buttons
        toggleButtons.forEach(btn => {
            btn.addEventListener('click', (e) => {
                const panelId = e.currentTarget.getAttribute('data-panel');
                togglePanel(panelId);
            });
        });
        
        // Resizing functionality
        let currentPanel, startX, startWidth;
        
        resizers.forEach(resizer => {
            resizer.addEventListener('mousedown', (e) => {
                e.preventDefault();
                currentPanel = resizer.previousElementSibling;
                startX = e.clientX;
                startWidth = parseInt(getComputedStyle(currentPanel).width, 10);
                
                document.addEventListener('mousemove', resizePanel);
                document.addEventListener('mouseup', stopResize);
            });
        });
        
        function resizePanel(e) {
            if (currentPanel) {
                const dx = e.clientX - startX;
                currentPanel.style.width = `${startWidth + dx}px`;
            }
        }
        
        function stopResize() {
            document.removeEventListener('mousemove', resizePanel);
            document.removeEventListener('mouseup', stopResize);
        }
        
        // Save and load functionality
        saveBtn.addEventListener('click', saveProject);
        loadBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', loadProject);
        
        function saveProject() {
            const project = {
                html: htmlCode.value,
                css: cssCode.value,
                js: jsCode.value,
                panels: panelState
            };
            
            const dataStr = JSON.stringify(project);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'code-project.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            // Visual feedback
            saveBtn.innerHTML = '<i class="fas fa-check"></i> Saved!';
            setTimeout(() => {
                saveBtn.innerHTML = '<i class="fas fa-save"></i> Save';
            }, 2000);
        }
        
        function loadProject(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const project = JSON.parse(e.target.result);
                    
                    htmlCode.value = project.html || '';
                    cssCode.value = project.css || '';
                    jsCode.value = project.js || '';
                    
                    // Restore panel states
                    if (project.panels) {
                        Object.keys(project.panels).forEach(panelId => {
                            panelState[panelId] = project.panels[panelId];
                            const panel = document.getElementById(panelId);
                            const toggleBtn = panel.querySelector('.toggle-btn i');
                            
                            if (panelState[panelId]) {
                                panel.classList.remove('collapsed');
                                toggleBtn.className = 'fas fa-chevron-left';
                            } else {
                                panel.classList.add('collapsed');
                                toggleBtn.className = 'fas fa-chevron-right';
                            }
                        });
                    }
                    
                    updatePreview();
                    
                    // Visual feedback
                    loadBtn.innerHTML = '<i class="fas fa-check"></i> Loaded!';
                    setTimeout(() => {
                        loadBtn.innerHTML = '<i class="fas fa-folder-open"></i> Load';
                    }, 2000);
                } catch (error) {
                    alert('Error loading file: ' + error.message);
                }
            };
            reader.readAsText(file);
        }
        
        // Adjust iframe on window resize
        window.addEventListener('resize', updatePreview);
    </script>
</body>
</html>